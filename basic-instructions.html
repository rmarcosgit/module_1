<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Basic instructions | Introduction to spatial statistics with R</title>
  <meta name="description" content="Chapter 3 Basic instructions | Introduction to spatial statistics with R" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Basic instructions | Introduction to spatial statistics with R" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Basic instructions | Introduction to spatial statistics with R" />
  
  
  

<meta name="author" content="Marcos Rodrigues" />


<meta name="date" content="2019-12-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-files.html"/>
<link rel="next" href="plotting-with-r.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.10/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MODULE 1: Introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prologue</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> A brief introduction to R</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#getting-and-installing-r"><i class="fa fa-check"></i><b>1.1.1</b> Getting and installing R</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#documentation-manuals-and-help"><i class="fa fa-check"></i><b>1.1.2</b> Documentation, manuals and help</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#starting-with-r"><i class="fa fa-check"></i><b>1.2</b> Starting with R</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#the-r-environment"><i class="fa fa-check"></i><b>1.2.1</b> The R environment</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#working-with-r"><i class="fa fa-check"></i><b>1.3</b> Working with R</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#objects-in-r"><i class="fa fa-check"></i><b>1.4</b> Objects in R</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#creating-objects"><i class="fa fa-check"></i><b>1.4.1</b> Creating objects</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#vectors"><i class="fa fa-check"></i><b>1.4.2</b> Vectors</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#lists"><i class="fa fa-check"></i><b>1.4.3</b> Lists</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#arrays"><i class="fa fa-check"></i><b>1.4.4</b> Arrays</a></li>
<li class="chapter" data-level="1.4.5" data-path="intro.html"><a href="intro.html#data.frame"><i class="fa fa-check"></i><b>1.4.5</b> Data.frame</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#object-management"><i class="fa fa-check"></i><b>1.5</b> Object management</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#functions-and-arguments"><i class="fa fa-check"></i><b>1.6</b> Functions and arguments</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#scripts-in-r"><i class="fa fa-check"></i><b>1.7</b> Scripts in R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-files.html"><a href="working-with-files.html"><i class="fa fa-check"></i><b>2</b> Working with files</a><ul>
<li class="chapter" data-level="2.1" data-path="working-with-files.html"><a href="working-with-files.html#the-working-directory"><i class="fa fa-check"></i><b>2.1</b> The working directory</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-files.html"><a href="working-with-files.html#reading-data-files"><i class="fa fa-check"></i><b>2.2</b> Reading data files</a></li>
<li class="chapter" data-level="2.3" data-path="working-with-files.html"><a href="working-with-files.html#writing-text-files"><i class="fa fa-check"></i><b>2.3</b> Writing text files</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-files.html"><a href="working-with-files.html#data-manipulation"><i class="fa fa-check"></i><b>2.4</b> Data manipulation</a><ul>
<li class="chapter" data-level="2.4.1" data-path="working-with-files.html"><a href="working-with-files.html#working-with-columns"><i class="fa fa-check"></i><b>2.4.1</b> Working with columns</a></li>
<li class="chapter" data-level="2.4.2" data-path="working-with-files.html"><a href="working-with-files.html#working-with-rows"><i class="fa fa-check"></i><b>2.4.2</b> Working with rows</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-instructions.html"><a href="basic-instructions.html"><i class="fa fa-check"></i><b>3</b> Basic instructions</a><ul>
<li class="chapter" data-level="3.1" data-path="basic-instructions.html"><a href="basic-instructions.html#descriptive-statistics-and-summaries"><i class="fa fa-check"></i><b>3.1</b> Descriptive statistics and summaries</a></li>
<li class="chapter" data-level="3.2" data-path="basic-instructions.html"><a href="basic-instructions.html#the-apply-function"><i class="fa fa-check"></i><b>3.2</b> The <em>apply()</em> function</a></li>
<li class="chapter" data-level="3.3" data-path="basic-instructions.html"><a href="basic-instructions.html#installing-packages"><i class="fa fa-check"></i><b>3.3</b> Installing packages</a><ul>
<li class="chapter" data-level="3.3.1" data-path="basic-instructions.html"><a href="basic-instructions.html#installing-an-external-package"><i class="fa fa-check"></i><b>3.3.1</b> Installing an external package</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="basic-instructions.html"><a href="basic-instructions.html#create-a-function"><i class="fa fa-check"></i><b>3.4</b> Create a function</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plotting-with-r.html"><a href="plotting-with-r.html"><i class="fa fa-check"></i><b>4</b> Plotting with R</a><ul>
<li class="chapter" data-level="4.1" data-path="plotting-with-r.html"><a href="plotting-with-r.html#basic-plots"><i class="fa fa-check"></i><b>4.1</b> Basic plots</a><ul>
<li class="chapter" data-level="4.1.1" data-path="plotting-with-r.html"><a href="plotting-with-r.html#dot-or-point-plots"><i class="fa fa-check"></i><b>4.1.1</b> Dot or point plots</a></li>
<li class="chapter" data-level="4.1.2" data-path="plotting-with-r.html"><a href="plotting-with-r.html#line-plots"><i class="fa fa-check"></i><b>4.1.2</b> Line plots</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="plotting-with-r.html"><a href="plotting-with-r.html#histograms"><i class="fa fa-check"></i><b>4.2</b> Histograms</a></li>
<li class="chapter" data-level="4.3" data-path="plotting-with-r.html"><a href="plotting-with-r.html#scatterplots"><i class="fa fa-check"></i><b>4.3</b> Scatterplots</a></li>
<li class="chapter" data-level="4.4" data-path="plotting-with-r.html"><a href="plotting-with-r.html#multiple-plots"><i class="fa fa-check"></i><b>4.4</b> Multiple plots</a><ul>
<li class="chapter" data-level="4.4.1" data-path="plotting-with-r.html"><a href="plotting-with-r.html#create-a-combined-plot"><i class="fa fa-check"></i><b>4.4.1</b> Create a combined plot</a></li>
<li class="chapter" data-level="4.4.2" data-path="plotting-with-r.html"><a href="plotting-with-r.html#export-an-image-file"><i class="fa fa-check"></i><b>4.4.2</b> Export an image file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i>Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to spatial statistics with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic-instructions" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Basic instructions</h1>
<div id="descriptive-statistics-and-summaries" class="section level2">
<h2><span class="header-section-number">3.1</span> Descriptive statistics and summaries</h2>
<p>There are a large number of functions in the basic installation of R. It would be practically impossible to see all of them so we will see some of the most used, although we must remember that not only is there the possibility of using predesigned functions, but R also offers the possibility to create your own functions.</p>
<p>Below are some of the basic statistical functions that we can find in R. These functions are generally applied <code>matrix-array</code> or <code>data.frame</code> data objects. Some of them can be applied to the whole table and others to single columns or rows.</p>
<ul>
<li><code>sum()</code> Add values.</li>
<li><code>max()</code> Returns the maximum value.</li>
<li><code>min()</code> Returns the minimum value.</li>
<li><code>mean()</code> Calculates the mean.</li>
<li><code>median()</code> Returns the median.</li>
<li><code>sd()</code> Calculates the standard deviation.</li>
<li><code>summary()</code> Returns a statistical summary of the columns.</li>
</ul>
<p>We are going to applie them using some example data. We will use the data stored in the file <em>fires.csv</em>, inside the <em>Data</em> folder (Table <a href="basic-instructions.html#fig:table2">3.1</a>). This file contains data on the annual number of fires between 1985 and 2009 in several European countries.</p>
<div class="figure"><span id="fig:table2"></span>
<div id="htmlwidget-3443d9a223f956567b0a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-3443d9a223f956567b0a">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],[1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009],[8441,5036,7705,6131,21896,10745,14327,14954,16101,19983,34116,28626,23497,34676,25477,34109,26533,26488,26195,21870,35697,19929,18722,13832,26119],[12238,7570,8679,9247,20811,12913,13531,15955,14254,19263,25827,16771,22320,22446,18237,24118,19547,19929,18616,21394,25492,16355,10915,11612,15391],[6249,4353,3043,2837,6763,5881,3888,4002,4769,4618,6563,6401,8005,6289,4960,4603,4309,4097,7023,3775,4698,4608,3364,2781,4800],[18664,9398,11972,13588,9669,14477,11965,14641,14412,11588,7378,9093,11612,9540,6932,8595,7134,4601,9697,6428,7951,5634,10639,6486,5422],[1442,1082,1266,1898,1284,1322,858,2582,2406,1763,1438,1508,2273,1842,1486,2581,2535,1141,1452,1748,1544,1417,1983,1481,1063],[47034,27439,32665,33701,60423,45338,44569,52134,51942,57215,75322,62399,67707,74793,57092,74006,60058,56256,62983,55215,75382,47943,45623,36192,52795]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>YEAR<\/th>\n      <th>PORTUGAL<\/th>\n      <th>SPAIN<\/th>\n      <th>FRANCE<\/th>\n      <th>ITALY<\/th>\n      <th>GREECE<\/th>\n      <th>EUMED<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 3.1: Structure of the fires.csv file.
</p>
</div>
<p>The first thing is to import the file into a <code>table</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fires&lt;-<span class="kw">read.table</span>(<span class="st">&#39;Data/fires.csv&#39;</span>, <span class="dt">header=</span> <span class="ot">TRUE</span>, <span class="dt">sep=</span><span class="st">&#39;,&#39;</span>)</code></pre></div>
<p>Once data is imported we can take a look at the structure to make sure that everything went well. We should have integer values for each region:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span> (fires)</code></pre></div>
<pre><code>## &#39;data.frame&#39;:    25 obs. of  7 variables:
##  $ YEAR    : int  1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 ...
##  $ PORTUGAL: int  8441 5036 7705 6131 21896 10745 14327 14954 16101 19983 ...
##  $ SPAIN   : int  12238 7570 8679 9247 20811 12913 13531 15955 14254 19263 ...
##  $ FRANCE  : int  6249 4353 3043 2837 6763 5881 3888 4002 4769 4618 ...
##  $ ITALY   : int  18664 9398 11972 13588 9669 14477 11965 14641 14412 11588 ...
##  $ GREECE  : int  1442 1082 1266 1898 1284 1322 858 2582 2406 1763 ...
##  $ EUMED   : int  47034 27439 32665 33701 60423 45338 44569 52134 51942 57215 ...</code></pre>
<p>Now we will calculate some descriptive statistics for each column to have a first approximation to the <em>distribution</em> of our data. To do this we will use the function <code>summary()</code> that will return some basic statistical values such as:</p>
<ul>
<li>Quantile</li>
<li>Mean</li>
<li>Median</li>
<li>Maximum</li>
<li>Minimum</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(fires)</code></pre></div>
<pre><code>##       YEAR         PORTUGAL         SPAIN           FRANCE    
##  Min.   :1985   Min.   : 5036   Min.   : 7570   Min.   :2781  
##  1st Qu.:1991   1st Qu.:14327   1st Qu.:12913   1st Qu.:4002  
##  Median :1997   Median :21870   Median :16771   Median :4618  
##  Mean   :1997   Mean   :20848   Mean   :16937   Mean   :4907  
##  3rd Qu.:2003   3rd Qu.:26488   3rd Qu.:20811   3rd Qu.:6249  
##  Max.   :2009   Max.   :35697   Max.   :25827   Max.   :8005  
##      ITALY           GREECE         EUMED      
##  Min.   : 4601   Min.   : 858   Min.   :27439  
##  1st Qu.: 7134   1st Qu.:1322   1st Qu.:45623  
##  Median : 9540   Median :1486   Median :55215  
##  Mean   : 9901   Mean   :1656   Mean   :54249  
##  3rd Qu.:11965   3rd Qu.:1898   3rd Qu.:62399  
##  Max.   :18664   Max.   :2582   Max.   :75382</code></pre>
<p>The <code>summary()</code> function is not only used to obtain summaries of data through descriptive statistics, but can also be used in model type objects to obtain a statistical summary of the results, coefficients, significance … Later we will see an example of this applied on a linear regression model.</p>
<p>Let’s now see what happens if we apply some of the functions presented above. Try running the following instructions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(fires)</code></pre></div>
<pre><code>## [1] 2762377</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(fires)</code></pre></div>
<pre><code>## [1] 75382</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(fires)</code></pre></div>
<pre><code>## [1] 858</code></pre>
<p>As can be seen these 3 instructions work with a <code>table</code>but <code>mean()</code>, <code>median()</code> and <code>sd()</code> will not. We have to apply them to a single column:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(fires<span class="op">$</span>SPAIN)</code></pre></div>
<pre><code>## [1] 16937.24</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(fires<span class="op">$</span>SPAIN)</code></pre></div>
<pre><code>## [1] 16771</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(fires<span class="op">$</span>SPAIN)</code></pre></div>
<pre><code>## [1] 5260.519</code></pre>
</div>
<div id="the-apply-function" class="section level2">
<h2><span class="header-section-number">3.2</span> The <em>apply()</em> function</h2>
<p>So far we have seen how to apply some of the basic statistical functions to our data, applying those functions to the data contained in the matrix or some of its columns. In the case of columns we have manually specified which one to apply a function. However, we can apply functions to all elements of an <code>array</code> (columns or rows) using iteration functions.</p>
<p>The <code>apply()</code> function allows you to apply a function to all elements of a table. We can apply some of the functions before the rows or columns of an array. There are different variants of this function. First, as always, invoke the help of the function to make sure what we are doing.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(apply)</code></pre></div>
<pre><code>## starting httpd help server ... done</code></pre>
<p>According to the specified in the function help we can see that the apply () function works as follows:</p>
<div class="fun">
<p>
apply (X, MARGIN, FUN, …)
</p>
</div>
<p>Where:</p>
<ul>
<li>X: data matrix.</li>
<li>MARGIN: argument to specify whether the function is applied to rows (1) or columns (2).</li>
<li>FUN: function to be applied (<code>mean</code>,<code>sum</code>…)</li>
</ul>
<p>For example, if we want to sum the values of each country/region we will do as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(fires,<span class="dv">2</span>,mean)</code></pre></div>
<pre><code>##     YEAR PORTUGAL    SPAIN   FRANCE    ITALY   GREECE    EUMED 
##  1997.00 20848.20 16937.24  4907.16  9900.64  1655.80 54249.04</code></pre>
<p>Well, almost there. We have included the <em>YEAR</em> column which is the first one:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(fires[,<span class="op">-</span><span class="dv">1</span>],<span class="dv">2</span>,mean)</code></pre></div>
<pre><code>## PORTUGAL    SPAIN   FRANCE    ITALY   GREECE    EUMED 
## 20848.20 16937.24  4907.16  9900.64  1655.80 54249.04</code></pre>
<p><strong>EXERCISE 1</strong>: Calculate the total number of fires on a yearly basis.</p>
<div class="exer">
<p>
<strong>EXERCISE 2</strong>: - Open the file “barea.csv” and save it in an array named “barea” - Select and store in a new matrix the data from the year 2000 to 2009 - Calculate descriptive statistics 2000-2009 - Calculate the mean, standard deviation, minimum and maximum of all columns and save it to a new object. - Save the object into a text file.
</p>
</div>
</div>
<div id="installing-packages" class="section level2">
<h2><span class="header-section-number">3.3</span> Installing packages</h2>
<p>We have already seen how some of the basic functions of R. work. However, we have the possibility of extending the functionalities of R by importing new packages into our environment. These packages are developed by different research groups and/or individuals.</p>
<p>There are currently over 4600 packages available in the R project repository (<a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">CRAN</a>). Obviously we do not need to know how each one of them works, but only focus on those that fit our needs.</p>
<p>The import and installation of new packages is carried out in 2 stages:</p>
<ol style="list-style-type: decimal">
<li>obtaining and installing and internal call to the package.</li>
<li>Loading the package into our session.</li>
</ol>
<div id="installing-an-external-package" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Installing an external package</h3>
<p>We will install the “foreign” package. This package provides functions for reading and writing data stored in different statistical software formats such as Minitab, S, SAS, SPSS, Stata, Systat … and to read and write <em>dBase</em> files such as attribute tables of vector layers in format <em>shapefile</em>. The first thing we will do is get the package via download. This can be done from the menu of R:</p>
<ul>
<li>Packages / Install packages …</li>
<li>Select download directory (mirror)</li>
<li>Search for “foreing”</li>
</ul>
<p>If you are using RStudio simply go to the <em>Packages</em> tab in the lower right box and select the <em>Install</em> option. In the popup window select the <em>Repository (CRAN, CRANextra)</em> option in the drop-down menu and type the name of the package.</p>
<div class="figure" style="text-align: center"><span id="fig:figure6"></span>
<img src="images/fig6_packages.png" alt="Installing a package using RStudio" width="80%" />
<p class="caption">
Figure 3.2: Installing a package using RStudio
</p>
</div>
<p>Another option is to obtain the package in <em>.zip</em> format directly from the webpage of project R and use the function <em>Install package (s) from local zip files …</em> (or <em>Package archives</em> in RStudio).</p>
<p>It is also possible to install packages through instructions in the R window, which is the most recommended method<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#install.packages(&#39;foreign&#39;)</span></code></pre></div>
<p>At this point we would have installed the package in our personal library of R. However, in order to use the functions of the new package in our R environment it is necessary to make an internal call to the package. This is generally done using the <code>library()</code> function<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)</code></pre></div>
<p>Once this is done we have all the functions of the package ready to be used. All that is left is to learn how to use the functions of the package… which is easy to say but maybe not to do.</p>
</div>
</div>
<div id="create-a-function" class="section level2">
<h2><span class="header-section-number">3.4</span> Create a function</h2>
<p>So far we have mainly seen how to use pre-designed functions either in the default installation or from other packages. However, there is the possibility of creating our own functions.</p>
<p>A function is a group of instructions that takes an input or input data, and uses them to calculate other values, returning a result or product. For example, the <code>mean()</code> function takes as input a vector and returns as a result a numeric value that corresponds to the arithmetic mean.</p>
<p>To create our own functions we will use the object called function that constitute new functions. The usual syntax is:</p>
<div class="fun">
<p>
FunctionName &lt;- function (arguments){commands}
</p>
</div>
<p>Where:</p>
<ul>
<li><code>arguments</code> are the arguments we want to pass to our function.</li>
<li><code>commands</code> are the instructions needed to do whatever the function does.</li>
</ul>
<p>Let’s look at a simple example. We will create a function to calculate the <a href="https://en.wikipedia.org/wiki/Standard_deviation">standard deviation</a> of a vector with numerical data. The standard deviation formula looks like this:</p>
<p><span class="math display">\[\mu = \sqrt{\frac{\sum_{i=1}^N (x_i - \overline{x})^2}{N-1} }\]</span></p>
<p>Which is essentally the square root (<code>sqrt()</code>) of the variance (<code>var()</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">desv &lt;-<span class="st"> </span><span class="cf">function</span>(x){<span class="kw">sqrt</span>(<span class="kw">var</span>(x))}</code></pre></div>
<p>The function name is <code>desv()</code>. This function requires a single argument (x) to be executed. Once the function is defined, it can be called and used as any other predefined function in the system.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
<span class="kw">desv</span>(data)</code></pre></div>
<pre><code>## [1] 3.02765</code></pre>
<p>Let’s see an example with 2 arguments. We will create a function to calculate the NDVI. The function will take as arguments two objects of vector type corresponding to the sensor Landsat TM channels 3 and 4:</p>
<blockquote>
<p>The normalized difference vegetation index (NDVI) is a simple graphical indicator that can be used to analyze remote sensing measurements, typically but not necessarily from a space platform, and assess whether the target being observed contains live green vegetation or not <a href="https://en.wikipedia.org/wiki/Normalized_Difference_Vegetation_Index">wikipedia.org</a>.</p>
</blockquote>
<p><span class="math display">\[NDVI=\frac{NIR-Red}{NIR+Red}\]</span></p>
<p>Where <span class="math inline">\(NIR\)</span> (<em>x</em>) is the near-infrarred band and <span class="math inline">\(Red\)</span> (<em>y</em>) is the red band.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ndvi &lt;-<span class="st"> </span><span class="cf">function</span>(x,y){(y<span class="op">-</span>x)<span class="op">/</span>(y<span class="op">+</span>x)}</code></pre></div>
<p>As we have said, once created we can use our functions in the same way as the rest of functions. This includes using the <code>apply()</code> function and its derived versions to iterate over rows and columns of an array or dataframe.</p>
<p>Let’s see an example with the function <code>desv()</code>, previously created applied to the data of number of fires:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(fires,<span class="dv">2</span>,desv)</code></pre></div>
<pre><code>##         YEAR     PORTUGAL        SPAIN       FRANCE        ITALY 
##     7.359801  9187.114305  5260.519400  1393.670265  3467.510729 
##       GREECE        EUMED 
##   496.662025 13547.393887</code></pre>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Do not forget quotes sorrounding the name of the package<a href="basic-instructions.html#fnref1">↩</a></p></li>
<li id="fn2"><p>Note that quotes are not needed<a href="basic-instructions.html#fnref2">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-files.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plotting-with-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
